name: ğŸ’¥ httpx - HTTP Web Server probing

on:
  schedule:
    - cron: '0 0 * * *'
  workflow_dispatch:

jobs:
  httpx-scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: ğŸ“‚ Create Output folder
        run: mkdir -p Output

      - name: ğŸ” Check input file
        run: |
          if [ ! -f Input/live_subdomains.txt ]; then
            echo "Input file missing!"
            exit 1
          fi
          cat Input/live_subdomains.txt

      - name: ğŸ’¥ Run httpx scan
        uses: projectdiscovery/httpx-action@main
        with:
          args: -l Input/live_subdomains.txt -o Output/httpx_results.txt

      - name: ğŸ“ Ensure output exists
        run: |
          if [ ! -f Output/httpx_results.txt ]; then
            echo "No results found, creating empty file."
            touch Output/httpx_results.txt
          fi

      - name: ğŸ“¦ Upload results as artifact
        uses: actions/upload-artifact@v4
        with:
          name: httpx-results
          path: Output/httpx_results.txt
